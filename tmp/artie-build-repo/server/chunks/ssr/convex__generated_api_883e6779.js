module.exports=[1322,a=>{"use strict";a.i(21338);var b=a.i(59230),c=a.i(99692),d=a.i(50527),e=a.i(95487);function f(a,b){if("u"<typeof Convex||void 0===Convex.syscall)throw Error("The Convex database and auth objects are being used outside of a Convex backend. Did you mean to use `useQuery` or `useMutation` to call a Convex function?");return JSON.parse(Convex.syscall(a,JSON.stringify(b)))}async function g(a,c){let d;if("u"<typeof Convex||void 0===Convex.asyncSyscall)throw Error("The Convex database and auth objects are being used outside of a Convex backend. Did you mean to use `useQuery` or `useMutation` to call a Convex function?");try{d=await Convex.asyncSyscall(a,JSON.stringify(c))}catch(a){if(void 0!==a.data){let c=new e.ConvexError(a.message);throw c.data=(0,b.jsonToConvex)(a.data),c}throw Error(a.message)}return JSON.parse(d)}a.i(10092);var h=a.i(4939);function i(a,b,c,d){if(void 0===a)throw TypeError(`Must provide arg ${b} \`${d}\` to \`${c}\``)}var j=Object.defineProperty,k=(a,b,c)=>{let d;return(d="symbol"!=typeof b?b+"":b)in a?j(a,d,{enumerable:!0,configurable:!0,writable:!0,value:c}):a[d]=c};class l{constructor(){k(this,"_isExpression"),k(this,"_value")}}var m=Object.defineProperty;class n extends l{constructor(a){super(),((a,b,c)=>{let d;return(d="symbol"!=typeof b?b+"":b)in a?m(a,d,{enumerable:!0,configurable:!0,writable:!0,value:c}):a[d]=c})(this,"inner"),this.inner=a}serialize(){return this.inner}}function o(a){return a instanceof n?a.serialize():{$literal:(0,b.convexOrUndefinedToJson)(a)}}let p={eq:(a,b)=>new n({$eq:[o(a),o(b)]}),neq:(a,b)=>new n({$neq:[o(a),o(b)]}),lt:(a,b)=>new n({$lt:[o(a),o(b)]}),lte:(a,b)=>new n({$lte:[o(a),o(b)]}),gt:(a,b)=>new n({$gt:[o(a),o(b)]}),gte:(a,b)=>new n({$gte:[o(a),o(b)]}),add:(a,b)=>new n({$add:[o(a),o(b)]}),sub:(a,b)=>new n({$sub:[o(a),o(b)]}),mul:(a,b)=>new n({$mul:[o(a),o(b)]}),div:(a,b)=>new n({$div:[o(a),o(b)]}),mod:(a,b)=>new n({$mod:[o(a),o(b)]}),neg:a=>new n({$neg:o(a)}),and:(...a)=>new n({$and:a.map(o)}),or:(...a)=>new n({$or:a.map(o)}),not:a=>new n({$not:o(a)}),field:a=>new n({$field:a})};var q=Object.defineProperty,r=(a,b,c)=>{let d;return(d="symbol"!=typeof b?b+"":b)in a?q(a,d,{enumerable:!0,configurable:!0,writable:!0,value:c}):a[d]=c};function s(a){throw Error("consumed"===a?"This query is closed and can't emit any more values.":"This query has been chained with another operator and can't be reused.")}class t{constructor(a){r(this,"state"),r(this,"tableNameForErrorMessages"),this.state={type:"preparing",query:a},"FullTableScan"===a.source.type?this.tableNameForErrorMessages=a.source.tableName:this.tableNameForErrorMessages=a.source.indexName.split(".")[0]}takeQuery(){if("preparing"!==this.state.type)throw Error("A query can only be chained once and can't be chained after iteration begins.");let a=this.state.query;return this.state={type:"closed"},a}startQuery(){if("executing"===this.state.type)throw Error("Iteration can only begin on a query once.");("closed"===this.state.type||"consumed"===this.state.type)&&s(this.state.type);let{queryId:a}=f("1.0/queryStream",{query:this.state.query,version:d.version});return this.state={type:"executing",queryId:a},a}closeQuery(){"executing"===this.state.type&&f("1.0/queryCleanup",{queryId:this.state.queryId}),this.state={type:"consumed"}}order(a){i(a,1,"order","order");let b=this.takeQuery();if("Search"===b.source.type)throw Error("Search queries must always be in relevance order. Can not set order manually.");if(null!==b.source.order)throw Error("Queries may only specify order at most once");return b.source.order=a,new t(b)}filter(a){i(a,1,"filter","predicate");let b=this.takeQuery();if(b.operators.length>=256)throw Error("Can't construct query with more than 256 operators");return b.operators.push({filter:o(a(p))}),new t(b)}limit(a){i(a,1,"limit","n");let b=this.takeQuery();return b.operators.push({limit:a}),new t(b)}[Symbol.asyncIterator](){return this.startQuery(),this}async next(){("closed"===this.state.type||"consumed"===this.state.type)&&s(this.state.type);let a="preparing"===this.state.type?this.startQuery():this.state.queryId,{value:c,done:d}=await g("1.0/queryStreamNext",{queryId:a});return d&&this.closeQuery(),{value:(0,b.jsonToConvex)(c),done:d}}return(){return this.closeQuery(),Promise.resolve({done:!0,value:void 0})}async paginate(a){if(i(a,1,"paginate","options"),"number"!=typeof a?.numItems||a.numItems<0)throw Error(`\`options.numItems\` must be a positive number. Received \`${a?.numItems}\`.`);let c=this.takeQuery(),e=a.numItems,f=a.cursor,h=a?.endCursor??null,j=a.maximumRowsRead??null,{page:k,isDone:l,continueCursor:m,splitCursor:n,pageStatus:o}=await g("1.0/queryPage",{query:c,cursor:f,endCursor:h,pageSize:e,maximumRowsRead:j,maximumBytesRead:a.maximumBytesRead,version:d.version});return{page:k.map(a=>(0,b.jsonToConvex)(a)),isDone:l,continueCursor:m,splitCursor:n,pageStatus:o}}async collect(){let a=[];for await(let b of this)a.push(b);return a}async take(a){i(a,1,"take","n");if(!Number.isInteger(a)||a<0)throw TypeError("Arg 1 `n` to `take` must be a non-negative integer");return this.limit(a).collect()}async first(){let a=await this.take(1);return 0===a.length?null:a[0]}async unique(){let a=await this.take(2);if(0===a.length)return null;if(2===a.length)throw Error(`unique() query returned more than one result from table ${this.tableNameForErrorMessages}:
 [${a[0]._id}, ${a[1]._id}, ...]`);return a[0]}}c.v.object({numItems:c.v.number(),cursor:c.v.union(c.v.string(),c.v.null()),endCursor:c.v.optional(c.v.union(c.v.string(),c.v.null())),id:c.v.optional(c.v.number()),maximumRowsRead:c.v.optional(c.v.number()),maximumBytesRead:c.v.optional(c.v.number())});var u=a.i(54662),v=Object.defineProperty,w=Object.defineProperty,x=(a,b,c)=>{let d;return(d="symbol"!=typeof b?b+"":b)in a?w(a,d,{enumerable:!0,configurable:!0,writable:!0,value:c}):a[d]=c};class y{constructor(a){x(this,"indexes"),x(this,"stagedDbIndexes"),x(this,"searchIndexes"),x(this,"stagedSearchIndexes"),x(this,"vectorIndexes"),x(this,"stagedVectorIndexes"),x(this,"validator"),this.indexes=[],this.stagedDbIndexes=[],this.searchIndexes=[],this.stagedSearchIndexes=[],this.vectorIndexes=[],this.stagedVectorIndexes=[],this.validator=a}" indexes"(){return this.indexes}index(a,b){return Array.isArray(b)?this.indexes.push({indexDescriptor:a,fields:b}):b.staged?this.stagedDbIndexes.push({indexDescriptor:a,fields:b.fields}):this.indexes.push({indexDescriptor:a,fields:b.fields}),this}searchIndex(a,b){return b.staged?this.stagedSearchIndexes.push({indexDescriptor:a,searchField:b.searchField,filterFields:b.filterFields||[]}):this.searchIndexes.push({indexDescriptor:a,searchField:b.searchField,filterFields:b.filterFields||[]}),this}vectorIndex(a,b){return b.staged?this.stagedVectorIndexes.push({indexDescriptor:a,vectorField:b.vectorField,dimensions:b.dimensions,filterFields:b.filterFields||[]}):this.vectorIndexes.push({indexDescriptor:a,vectorField:b.vectorField,dimensions:b.dimensions,filterFields:b.filterFields||[]}),this}self(){return this}export(){let a=this.validator.json;if("object"!=typeof a)throw Error("Invalid validator: please make sure that the parameter of `defineTable` is valid (see https://docs.convex.dev/database/schemas)");return{indexes:this.indexes,stagedDbIndexes:this.stagedDbIndexes,searchIndexes:this.searchIndexes,stagedSearchIndexes:this.stagedSearchIndexes,vectorIndexes:this.vectorIndexes,stagedVectorIndexes:this.stagedVectorIndexes,documentType:a}}}function z(a){return new y((0,c.isValidator)(a)?a:c.v.object(a))}new class a{constructor(a,b){x(this,"tables"),x(this,"strictTableNameTypes"),x(this,"schemaValidation"),this.tables=a,this.schemaValidation=b?.schemaValidation===void 0||b.schemaValidation}export(){return JSON.stringify({tables:Object.entries(this.tables).map(([a,b])=>{let{indexes:c,stagedDbIndexes:d,searchIndexes:e,stagedSearchIndexes:f,vectorIndexes:g,stagedVectorIndexes:h,documentType:i}=b.export();return{tableName:a,indexes:c,stagedDbIndexes:d,searchIndexes:e,stagedSearchIndexes:f,vectorIndexes:g,stagedVectorIndexes:h,documentType:i}}),schemaValidation:this.schemaValidation})}}({_scheduled_functions:z({name:c.v.string(),args:c.v.array(c.v.any()),scheduledTime:c.v.float64(),completedTime:c.v.optional(c.v.float64()),state:c.v.union(c.v.object({kind:c.v.literal("pending")}),c.v.object({kind:c.v.literal("inProgress")}),c.v.object({kind:c.v.literal("success")}),c.v.object({kind:c.v.literal("failed"),error:c.v.string()}),c.v.object({kind:c.v.literal("canceled")}))}),_storage:z({sha256:c.v.string(),size:c.v.float64(),contentType:c.v.optional(c.v.string())})},void 0);let A=u.anyApi;u.anyApi,function a(b,c){return new Proxy({},{get(d,e){if("string"==typeof e)return a(b,[...c,e]);if(e===h.toReferencePath){if(c.length<1){let a=[b,...c].join(".");throw Error(`API path is expected to be of the form \`${b}.childComponent.functionName\`. Found: \`${a}\``)}return"_reference/childComponent/"+c.join("/")}}})}("components",[]),a.s(["api",0,A],1322)}];

//# sourceMappingURL=convex__generated_api_883e6779.js.map