(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18566,(e,t,s)=>{t.exports=e.r(76562)},3374,e=>{"use strict";var t=e.i(43476),s=e.i(23832);e.i(50711);var r=e.i(82045),i=e.i(83394);function n(){let{signOut:e}=(0,s.useAuthActions)(),n=(0,r.useQuery)(i.api.users.currentUser),c=n?.email?n.email.charAt(0).toUpperCase():n?.name?n.name.charAt(0).toUpperCase():"U";return(0,t.jsxs)("header",{className:"flex h-12 shrink-0 items-center justify-between border-b border-zinc-800 bg-zinc-900 px-4 text-white",children:[(0,t.jsx)("div",{className:"text-lg font-bold tracking-tight",children:"Artie"}),(0,t.jsx)("div",{className:"text-sm text-zinc-400",children:"my-project"}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-zinc-700 text-xs font-medium",children:c}),(0,t.jsx)("button",{onClick:()=>void e(),className:"text-sm text-zinc-400 hover:text-white",children:"Sign out"})]})]})}e.s(["Header",()=>n])},13195,e=>{"use strict";var t=e.i(43476),s=e.i(71645);e.i(50711);var r=e.i(81958),i=e.i(18566),n=e.i(3374);function c({left:e,right:r}){let i=(0,s.useRef)(null),[n,c]=(0,s.useState)(35),a=(0,s.useRef)(!1);return(0,s.useEffect)(()=>{function e(e){if(!a.current||!i.current)return;let t=i.current.getBoundingClientRect(),s=(e.clientX-t.left)/t.width*100;c(Math.min(60,Math.max(300/t.width*100,s)))}function t(){a.current=!1,document.body.style.cursor="",document.body.style.userSelect=""}return document.addEventListener("mousemove",e),document.addEventListener("mouseup",t),()=>{document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",t)}},[]),(0,t.jsxs)("div",{ref:i,className:"flex min-h-0 flex-1",children:[(0,t.jsx)("div",{className:"overflow-y-auto",style:{width:`${n}%`},children:e}),(0,t.jsx)("div",{onMouseDown:function(){a.current=!0,document.body.style.cursor="col-resize",document.body.style.userSelect="none"},className:"w-1 shrink-0 cursor-col-resize bg-zinc-200 transition-colors hover:bg-zinc-400 dark:bg-zinc-700 dark:hover:bg-zinc-500"}),(0,t.jsx)("div",{className:"min-w-0 flex-1 overflow-y-auto",children:r})]})}var a=e.i(82045),l=e.i(83394);function o({role:e,content:s,timestamp:r}){let i="user"===e;return(0,t.jsxs)("div",{className:`flex flex-col ${i?"items-end":"items-start"}`,children:[(0,t.jsx)("span",{className:"mb-1 text-xs text-zinc-400",children:i?"You":"Artie"}),(0,t.jsx)("div",{className:`max-w-[80%] rounded-lg px-3 py-2 text-sm ${i?"ml-auto bg-zinc-800 text-white":"mr-auto bg-zinc-100 text-zinc-900 dark:bg-zinc-800 dark:text-zinc-100"}`,children:s}),(0,t.jsx)("span",{className:"mt-1 text-xs text-zinc-400",children:function(e){let t=Math.floor((Date.now()-e)/1e3);if(t<60)return"just now";let s=Math.floor(t/60);if(s<60)return`${s}m ago`;let r=Math.floor(s/60);return r<24?`${r}h ago`:new Date(e).toLocaleDateString()}(r)})]})}function d({messages:e}){let r=(0,s.useRef)(null);return((0,s.useEffect)(()=>{r.current?.scrollIntoView({behavior:"smooth"})},[e.length]),0===e.length)?(0,t.jsx)("div",{className:"flex flex-1 items-center justify-center p-4",children:(0,t.jsx)("p",{className:"text-center text-sm text-zinc-400",children:"Start a conversation to preview and edit your code"})}):(0,t.jsxs)("div",{className:"flex flex-1 flex-col gap-3 overflow-y-auto p-4",children:[e.map(e=>(0,t.jsx)(o,{role:e.role,content:e.content,timestamp:e.timestamp},e._id)),(0,t.jsx)("div",{ref:r})]})}function x({onSessionCreated:e}){let[r,i]=(0,s.useState)(""),[n,c]=(0,s.useState)(null),[o,x]=(0,s.useState)(!1),u=(0,s.useRef)(!1),m=(0,a.useMutation)(l.api.sessions.createDemo),h=(0,a.useMutation)(l.api.messages.send),f=(0,a.useMutation)(l.api.ai.generateResponse),v=(0,a.useQuery)(l.api.messages.list,n?{sessionId:n}:"skip");(0,s.useEffect)(()=>{u.current||(u.current=!0,m().then(t=>{c(t),e?.(t)}))},[m,e]);let b=async e=>{e.preventDefault();let t=r.trim();if(t&&n&&!o){x(!0),i("");try{await h({sessionId:n,role:"user",content:t}),await f({sessionId:n,userMessage:t})}finally{x(!1)}}},p=!!n&&r.trim().length>0&&!o;return n?(0,t.jsxs)("div",{className:"flex h-full flex-col bg-white dark:bg-zinc-900",children:[(0,t.jsx)(d,{messages:v??[]}),(0,t.jsx)("form",{onSubmit:b,className:"border-t border-zinc-200 p-3 dark:border-zinc-700",children:(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("input",{type:"text",value:r,onChange:e=>i(e.target.value),placeholder:"Describe what you'd like to change...",disabled:o,className:"flex-1 rounded-lg border border-zinc-300 bg-zinc-50 px-3 py-2 text-sm outline-none placeholder:text-zinc-400 focus:border-zinc-500 disabled:opacity-50 dark:border-zinc-600 dark:bg-zinc-800 dark:text-white dark:placeholder:text-zinc-500 dark:focus:border-zinc-400"}),(0,t.jsx)("button",{type:"submit",disabled:!p,className:"rounded-lg bg-zinc-900 px-3 py-2 text-sm font-medium text-white transition-colors hover:bg-zinc-700 disabled:opacity-50 dark:bg-zinc-100 dark:text-zinc-900 dark:hover:bg-zinc-300",children:(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"h-4 w-4",children:(0,t.jsx)("path",{d:"M3.105 2.288a.75.75 0 0 0-.826.95l1.414 4.926A1.5 1.5 0 0 0 5.135 9.25h6.115a.75.75 0 0 1 0 1.5H5.135a1.5 1.5 0 0 0-1.442 1.086l-1.414 4.926a.75.75 0 0 0 .826.95l14.095-5.638a.75.75 0 0 0 0-1.398L3.105 2.289Z"})})})]})})]}):(0,t.jsx)("div",{className:"flex h-full flex-col items-center justify-center bg-white dark:bg-zinc-900",children:(0,t.jsx)("p",{className:"text-sm text-zinc-400",children:"Starting session..."})})}function u({sessionId:e}){let[r,i]=(0,s.useState)("preview"),n=(0,a.useQuery)(l.api.sessions.getPreviewCode,e?{sessionId:e}:"skip");return(0,t.jsxs)("div",{className:"flex h-full flex-col bg-zinc-100 dark:bg-zinc-950",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1 border-b border-zinc-200 px-3 py-1.5 dark:border-zinc-800",children:[(0,t.jsx)("button",{onClick:()=>i("preview"),className:`rounded px-2.5 py-1 text-xs font-medium transition-colors ${"preview"===r?"bg-zinc-900 text-white dark:bg-zinc-100 dark:text-zinc-900":"text-zinc-500 hover:text-zinc-700 dark:text-zinc-400 dark:hover:text-zinc-200"}`,children:"Preview"}),(0,t.jsx)("button",{onClick:()=>i("code"),className:`rounded px-2.5 py-1 text-xs font-medium transition-colors ${"code"===r?"bg-zinc-900 text-white dark:bg-zinc-100 dark:text-zinc-900":"text-zinc-500 hover:text-zinc-700 dark:text-zinc-400 dark:hover:text-zinc-200"}`,children:"Code"})]}),n?"preview"===r?(0,t.jsx)("iframe",{srcDoc:n,sandbox:"allow-scripts",title:"Preview",className:"flex-1 w-full bg-white",style:{border:"none"}}):(0,t.jsx)("div",{className:"flex-1 overflow-auto bg-zinc-50 p-4 dark:bg-zinc-900",children:(0,t.jsx)("pre",{className:"text-xs leading-relaxed text-zinc-700 dark:text-zinc-300",children:(0,t.jsx)("code",{children:n})})}):(0,t.jsx)("div",{className:"flex flex-1 items-center justify-center p-4",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"mx-auto mb-3 flex h-12 w-12 items-center justify-center rounded-full bg-zinc-200 dark:bg-zinc-800",children:(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"h-6 w-6 text-zinc-400",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M4.25 5.5a.75.75 0 0 0-.75.75v8.5c0 .414.336.75.75.75h8.5a.75.75 0 0 0 .75-.75v-4a.75.75 0 0 1 1.5 0v4A2.25 2.25 0 0 1 12.75 17h-8.5A2.25 2.25 0 0 1 2 14.75v-8.5A2.25 2.25 0 0 1 4.25 4h5a.75.75 0 0 1 0 1.5h-5Zm7.217-.818a.75.75 0 0 1 1.06 0l3.5 3.5a.75.75 0 0 1-1.06 1.06l-1.72-1.72v6.228a.75.75 0 0 1-1.5 0V7.522l-1.72 1.72a.75.75 0 0 1-1.06-1.06l3.5-3.5Z",clipRule:"evenodd"})})}),(0,t.jsx)("p",{className:"text-sm text-zinc-500 dark:text-zinc-400",children:"Send a message to see a live preview"})]})}),(0,t.jsx)("div",{className:"border-t border-zinc-200 px-4 py-2 dark:border-zinc-800",children:(0,t.jsx)("p",{className:`text-xs ${n?"text-emerald-600 dark:text-emerald-400":"text-zinc-400 dark:text-zinc-500"}`,children:n?"Preview ready":"No preview available"})})]})}function m(){let{isAuthenticated:e,isLoading:a}=(0,r.useConvexAuth)(),l=(0,i.useRouter)();(0,i.useParams)();let[o,d]=(0,s.useState)(null);return((0,s.useEffect)(()=>{a||e||l.push("/login")},[e,a,l]),a)?(0,t.jsx)("div",{className:"flex h-screen items-center justify-center bg-zinc-950",children:(0,t.jsx)("div",{className:"h-6 w-6 animate-spin rounded-full border-2 border-zinc-600 border-t-white"})}):e?(0,t.jsxs)("div",{className:"flex h-screen flex-col",children:[(0,t.jsx)(n.Header,{}),(0,t.jsx)(c,{left:(0,t.jsx)(x,{onSessionCreated:d}),right:(0,t.jsx)(u,{sessionId:o})})]}):null}e.s(["default",()=>m],13195)}]);